<%- model_class = Vendaplano -%>

<%= grid(@vendaplanos_grid,
	allow_showing_all_records:  false,
	show_filters: :when_filtered) do |g|

	#if can? :update, @aluno
	#	g.last_row do |number_of_columns|
	#		content_tag(:tr,
	#		content_tag(:td, link_to('Novo Aluno', new_aluno_path,:class => 'btn btn-primary'  ),colspan: 9), class: 'last-row')
	#	end
  #end

	#
	g.column name:  'Id Academia', attribute: 'aluno_id' do |venPlano|
		venPlano.aluno.idacademia
	end

	#
	g.column name:  'Aluno', attribute: 'aluno_id' do |venPlano|
		venPlano.aluno.nome
	end
	#
	g.column name:  'Plano', attribute: 'tabelaplano_id' do |venPlano|
		venPlano.tabelaplano.nome
	end
	#
	g.column name:  'Periodo', attribute: 'tabelaplano_id' do |venPlano|
		venPlano.tabelaplano.periodo
	end
	#
	g.column name:  'Parcelas', attribute: 'tabelaplano_id' do |venPlano|
		venPlano.nu_parcela.to_s + " de " +venPlano.tabelaplano.parcelas.to_s
	end
	#
	g.column name:  'Valor', attribute: 'tabelaplano_id' do |venPlano|
		venPlano.tabelaplano.valor
	end

	g.column name:  'Forma Pag', attribute: 'formapagamento_id' do |venPlano|
		venPlano.formapagamento.nome
	end

	#
	g.column name:  'Dia Pgto', attribute: 'nu_dia' do |venPlano|
		venPlano.nu_dia
	end

	#tipovendas
	g.column name:  'Data venda', attribute: 'dt_venda' do |venPlano|
		venPlano.dt_venda
	end

	#
	g.column name:  'Data baixa', attribute: 'dt_baixa' do |venPlano|
		venPlano.dt_baixa
	end

	#
	g.column name:  'Tp Venda', attribute: 'tipovenda_id' do |venPlano|
		venPlano.tipovenda.nome
	end

	#
	g.column name:  'Consultor', attribute: 'vendido_por' do |venPlano|
		venPlano.vendido_por
	end

  #
	g.column   do |venPlano|
		link_to( image_tag("btnOperation/form_show.png", :alt => "Visualizar") , venPlano)
	end
  #
	g.column   do |venPlano|
		link_to(image_tag("btnOperation/form_edit.png", :alt => "Alterar."), edit_vendaplano_path(venPlano))
	end
  #
	g.column   do |venPlano|
		link_to image_tag("btnOperation/form_delete.png", :alt => "Excluir."),
						  venPlano,
						  method: :delete, data: { :confirm => t('.confirm', :default => t("helpers.links.confirmdelete", :default => 'Are you sure?')) }
	end

end %>
<%=link_to('Novo Plano', new_vendaplano_path,:class => 'btn btn-primary'  )%>
